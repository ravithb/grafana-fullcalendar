{"version":3,"sources":["../src/data_formatter.js"],"names":["DataFormatter","ctrl","kbn","tableData","data","length","forEach","datapoint","push","id","panel","columnMappings","idField","calendarId","title","titleField","category","dueDateClass","start","moment","startField","toDate","end","endField","isAllDay","allDayField","undefined","datapoints","type","columnNames","columns","column","columnIndex","text","rows","row","value","key"],"mappings":";;;;;;;AAAA;;AACA;;;;;;;;;;;;IAEqBA,a;;;AACnB,yBAAYC,IAAZ,EAAkBC,GAAlB,EAAuB;AAAA;;AACrB,SAAKD,IAAL,GAAYA,IAAZ;AACA,SAAKC,GAAL,GAAWA,GAAX;AACD;;;;mCA2BcC,S,EAAWC,I,EAAM;AAAA;;AAC9B,UAAID,SAAS,IAAIA,SAAS,CAACE,MAAV,GAAmB,CAApC,EAAuC;AAErCF,QAAAA,SAAS,CAAC,CAAD,CAAT,CAAaG,OAAb,CAAqB,UAACC,SAAD,EAAe;AAClCH,UAAAA,IAAI,CAACI,IAAL,CAAU;AACRC,YAAAA,EAAE,EAAEF,SAAS,CAAC,KAAI,CAACN,IAAL,CAAUS,KAAV,CAAgBC,cAAhB,CAA+BC,OAAhC,CADL;AAERC,YAAAA,UAAU,EAAE,KAAI,CAACZ,IAAL,CAAUS,KAAV,CAAgBG,UAFpB;AAGRC,YAAAA,KAAK,EAAEP,SAAS,CAAC,KAAI,CAACN,IAAL,CAAUS,KAAV,CAAgBC,cAAhB,CAA+BI,UAAhC,CAHR;AAIRC,YAAAA,QAAQ,EAAE,MAJF;AAKRC,YAAAA,YAAY,EAAE,EALN;AAMRC,YAAAA,KAAK,EAAEC,MAAM,CAACZ,SAAS,CAAC,KAAI,CAACN,IAAL,CAAUS,KAAV,CAAgBC,cAAhB,CAA+BS,UAAhC,CAAV,CAAN,CAA6DC,MAA7D,EANC;AAORC,YAAAA,GAAG,EAAEH,MAAM,CAACZ,SAAS,CAAC,KAAI,CAACN,IAAL,CAAUS,KAAV,CAAgBC,cAAhB,CAA+BY,QAAhC,CAAV,CAAN,CAA2DF,MAA3D,EAPG;AAQRG,YAAAA,QAAQ,EAAGjB,SAAS,CAAC,KAAI,CAACN,IAAL,CAAUS,KAAV,CAAgBC,cAAhB,CAA+Bc,WAAhC,CAAT,KAA0DC,SAA3D,GAAsEnB,SAAS,CAAC,KAAI,CAACN,IAAL,CAAUS,KAAV,CAAgBC,cAAhB,CAA+Bc,WAAhC,CAA/E,GAA4H;AAR9H,WAAV;AAUD,SAXD;AAYD;AACF;;;iCAzCmBtB,S,EAAW;AAC7B,UAAMwB,UAAU,GAAG,EAAnB;;AAEA,UAAIxB,SAAS,CAACyB,IAAV,KAAmB,OAAvB,EAAgC;AAC9B,YAAMC,WAAW,GAAG,EAApB;AAEA1B,QAAAA,SAAS,CAAC2B,OAAV,CAAkBxB,OAAlB,CAA0B,UAACyB,MAAD,EAASC,WAAT,EAAyB;AACjDH,UAAAA,WAAW,CAACG,WAAD,CAAX,GAA2BD,MAAM,CAACE,IAAlC;AACD,SAFD;AAIA9B,QAAAA,SAAS,CAAC+B,IAAV,CAAe5B,OAAf,CAAuB,UAAC6B,GAAD,EAAS;AAC9B,cAAM5B,SAAS,GAAG,EAAlB;AAEA4B,UAAAA,GAAG,CAAC7B,OAAJ,CAAY,UAAC8B,KAAD,EAAQJ,WAAR,EAAwB;AAClC,gBAAMK,GAAG,GAAGR,WAAW,CAACG,WAAD,CAAvB;AACAzB,YAAAA,SAAS,CAAC8B,GAAD,CAAT,GAAiBD,KAAjB;AACD,WAHD;AAKAT,UAAAA,UAAU,CAACnB,IAAX,CAAgBD,SAAhB;AACD,SATD;AAUD;;AAED,aAAOoB,UAAP;AACD","sourcesContent":["import _ from 'lodash';\nimport * as moment from './libs/moment';\n\nexport default class DataFormatter {\n  constructor(ctrl, kbn) {\n    this.ctrl = ctrl;\n    this.kbn = kbn;\n  }\n\n  static tableHandler(tableData) {\n    const datapoints = [];\n\n    if (tableData.type === 'table') {\n      const columnNames = {};\n\n      tableData.columns.forEach((column, columnIndex) => {\n        columnNames[columnIndex] = column.text;\n      });\n\n      tableData.rows.forEach((row) => {\n        const datapoint = {};\n\n        row.forEach((value, columnIndex) => {\n          const key = columnNames[columnIndex];\n          datapoint[key] = value;\n        });\n\n        datapoints.push(datapoint);\n      });\n    }\n\n    return datapoints;\n  }\n\n  setTableValues(tableData, data) {\n    if (tableData && tableData.length > 0) {\n\n      tableData[0].forEach((datapoint) => {\n        data.push({\n          id: datapoint[this.ctrl.panel.columnMappings.idField],\n          calendarId: this.ctrl.panel.calendarId,\n          title: datapoint[this.ctrl.panel.columnMappings.titleField],\n          category: 'time',\n          dueDateClass: '',\n          start: moment(datapoint[this.ctrl.panel.columnMappings.startField]).toDate(),\n          end: moment(datapoint[this.ctrl.panel.columnMappings.endField]).toDate(),\n          isAllDay: (datapoint[this.ctrl.panel.columnMappings.allDayField] !== undefined)?datapoint[this.ctrl.panel.columnMappings.allDayField]:false\n        });\n      });\n    }\n  }\n}\n"],"file":"data_formatter.js"}