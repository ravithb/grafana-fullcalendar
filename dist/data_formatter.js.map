{"version":3,"sources":["../src/data_formatter.js"],"names":["DataFormatter","ctrl","kbn","tableData","data","length","forEach","datapoint","push","id","panel","columnMappings","idField","calendarId","title","titleField","category","categoryField","raw","dataField","dueDateClass","start","moment","startField","toDate","end","endField","isAllDay","allDayField","undefined","datapoints","type","columnNames","columns","column","columnIndex","text","rows","row","value","key"],"mappings":";;;;;;;AAAA;;AACA;;;;;;;;;;;;IAEqBA,a;;;AACnB,yBAAYC,IAAZ,EAAkBC,GAAlB,EAAuB;AAAA;;AACrB,SAAKD,IAAL,GAAYA,IAAZ;AACA,SAAKC,GAAL,GAAWA,GAAX;AACD;;;;mCA2BcC,S,EAAWC,I,EAAM;AAAA;;AAC9B,UAAID,SAAS,IAAIA,SAAS,CAACE,MAAV,GAAmB,CAApC,EAAuC;AAErCF,QAAAA,SAAS,CAAC,CAAD,CAAT,CAAaG,OAAb,CAAqB,UAACC,SAAD,EAAe;AAClCH,UAAAA,IAAI,CAACI,IAAL,CAAU;AACRC,YAAAA,EAAE,EAAEF,SAAS,CAAC,KAAI,CAACN,IAAL,CAAUS,KAAV,CAAgBC,cAAhB,CAA+BC,OAAhC,CADL;AAERC,YAAAA,UAAU,EAAE,KAAI,CAACZ,IAAL,CAAUS,KAAV,CAAgBG,UAFpB;AAGRC,YAAAA,KAAK,EAAEP,SAAS,CAAC,KAAI,CAACN,IAAL,CAAUS,KAAV,CAAgBC,cAAhB,CAA+BI,UAAhC,CAHR;AAIRC,YAAAA,QAAQ,EAAET,SAAS,CAAC,KAAI,CAACN,IAAL,CAAUS,KAAV,CAAgBC,cAAhB,CAA+BM,aAAhC,CAAT,IAA2D,MAJ7D;AAKRC,YAAAA,GAAG,EAAEX,SAAS,CAAC,KAAI,CAACN,IAAL,CAAUS,KAAV,CAAgBC,cAAhB,CAA+BQ,SAAhC,CAAT,IAAuD,EALpD;AAMRC,YAAAA,YAAY,EAAE,EANN;AAORC,YAAAA,KAAK,EAAEC,MAAM,CAACf,SAAS,CAAC,KAAI,CAACN,IAAL,CAAUS,KAAV,CAAgBC,cAAhB,CAA+BY,UAAhC,CAAV,CAAN,CAA6DC,MAA7D,EAPC;AAQRC,YAAAA,GAAG,EAAEH,MAAM,CAACf,SAAS,CAAC,KAAI,CAACN,IAAL,CAAUS,KAAV,CAAgBC,cAAhB,CAA+Be,QAAhC,CAAV,CAAN,CAA2DF,MAA3D,EARG;AASRG,YAAAA,QAAQ,EAAGpB,SAAS,CAAC,KAAI,CAACN,IAAL,CAAUS,KAAV,CAAgBC,cAAhB,CAA+BiB,WAAhC,CAAT,KAA0DC,SAA3D,GAAsEtB,SAAS,CAAC,KAAI,CAACN,IAAL,CAAUS,KAAV,CAAgBC,cAAhB,CAA+BiB,WAAhC,CAA/E,GAA4H;AAT9H,WAAV;AAWD,SAZD;AAaD;AACF;;;iCA1CmBzB,S,EAAW;AAC7B,UAAM2B,UAAU,GAAG,EAAnB;;AAEA,UAAI3B,SAAS,CAAC4B,IAAV,KAAmB,OAAvB,EAAgC;AAC9B,YAAMC,WAAW,GAAG,EAApB;AAEA7B,QAAAA,SAAS,CAAC8B,OAAV,CAAkB3B,OAAlB,CAA0B,UAAC4B,MAAD,EAASC,WAAT,EAAyB;AACjDH,UAAAA,WAAW,CAACG,WAAD,CAAX,GAA2BD,MAAM,CAACE,IAAlC;AACD,SAFD;AAIAjC,QAAAA,SAAS,CAACkC,IAAV,CAAe/B,OAAf,CAAuB,UAACgC,GAAD,EAAS;AAC9B,cAAM/B,SAAS,GAAG,EAAlB;AAEA+B,UAAAA,GAAG,CAAChC,OAAJ,CAAY,UAACiC,KAAD,EAAQJ,WAAR,EAAwB;AAClC,gBAAMK,GAAG,GAAGR,WAAW,CAACG,WAAD,CAAvB;AACA5B,YAAAA,SAAS,CAACiC,GAAD,CAAT,GAAiBD,KAAjB;AACD,WAHD;AAKAT,UAAAA,UAAU,CAACtB,IAAX,CAAgBD,SAAhB;AACD,SATD;AAUD;;AAED,aAAOuB,UAAP;AACD","sourcesContent":["import _ from 'lodash';\nimport * as moment from './libs/moment';\n\nexport default class DataFormatter {\n  constructor(ctrl, kbn) {\n    this.ctrl = ctrl;\n    this.kbn = kbn;\n  }\n\n  static tableHandler(tableData) {\n    const datapoints = [];\n\n    if (tableData.type === 'table') {\n      const columnNames = {};\n\n      tableData.columns.forEach((column, columnIndex) => {\n        columnNames[columnIndex] = column.text;\n      });\n\n      tableData.rows.forEach((row) => {\n        const datapoint = {};\n\n        row.forEach((value, columnIndex) => {\n          const key = columnNames[columnIndex];\n          datapoint[key] = value;\n        });\n\n        datapoints.push(datapoint);\n      });\n    }\n\n    return datapoints;\n  }\n\n  setTableValues(tableData, data) {\n    if (tableData && tableData.length > 0) {\n\n      tableData[0].forEach((datapoint) => {\n        data.push({\n          id: datapoint[this.ctrl.panel.columnMappings.idField],\n          calendarId: this.ctrl.panel.calendarId,\n          title: datapoint[this.ctrl.panel.columnMappings.titleField],\n          category: datapoint[this.ctrl.panel.columnMappings.categoryField] || 'time',\n          raw: datapoint[this.ctrl.panel.columnMappings.dataField] || '',\n          dueDateClass: '',\n          start: moment(datapoint[this.ctrl.panel.columnMappings.startField]).toDate(),\n          end: moment(datapoint[this.ctrl.panel.columnMappings.endField]).toDate(),\n          isAllDay: (datapoint[this.ctrl.panel.columnMappings.allDayField] !== undefined)?datapoint[this.ctrl.panel.columnMappings.allDayField]:false\n        });\n      });\n    }\n  }\n}\n"],"file":"data_formatter.js"}